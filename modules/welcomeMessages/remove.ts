import CONSTANTS from "../../../common/CONSTANTS.js";
import type Event from "../../../common/types/event";

const event: Event<"guildMemberAdd"> = async function event(member) {
	if (member.guild.id !== CONSTANTS.guild.id) return;

	const banned = await CONSTANTS.guild.bans.fetch(member).catch(() => {});

	const byes = banned
		? [
				`Oofâ€¦ **${member.user.username}** got bannedâ€¦`,
				`Thereâ€™s no turning back for **${member.user.username}**â€¦`,
				`I donâ€™t think this was the best place for **${member.user.username}**â€¦`,
				`Oop, **${member.user.username}** angered the mods!`,
				`**${member.user.username}** broke the rules and took an ðŸ‡±`,
				`**${member.user.username}** talked about opacity slider too much.`,
		  ]
		: [
				`Welpâ€¦ **${member.user.username}** decided to leaveâ€¦ what a shameâ€¦`,
				`Ahhâ€¦ **${member.user.username}** left usâ€¦ hope theyâ€™ll have safe travels!`,
				`There goes another, bye **${member.user.username}**!`,
				`Oop, **${member.user.username}** leftâ€¦ will they ever come back?`,
				`Can we get an F in the chat for **${member.user.username}**? They left!`,
				`Ope, **${member.user.username}** got eaten by an evil kumquat and left!`,
		  ];

	await CONSTANTS.channels.welcome?.send(
		`${CONSTANTS.emojis.misc[banned ? "ban" : "leave"]} ${
			byes[Math.floor(Math.random() * byes.length)]
		}`,
	);

};
export default event;
